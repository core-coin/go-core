name: go-core build
on: [push, pull_request]
jobs:
  build:
    strategy:
      matrix:
        platform: [ubuntu-latest]
    runs-on: ${{ matrix.platform }}
    steps:
    - name: Setup
      uses: actions/setup-go@v1
      with:
        go-version: 1.14.x
      id: go
    - name: Checkout
      uses: actions/checkout@v1
    - name: Build
      run: go run build/ci.go install
    #- name: Test
    #  run: go run build/ci.go test
    - name: setup debuild
      run: sudo apt-get install build-essential fakeroot devscripts dh-make
    - name: run debuild
      run: |
        export DEB_SRC=/tmp/dist-deb
        mkdir $DEB_SRC
        sudo go run build/ci.go debsrc -goversion 1.14.6 -workdir $DEB_SRC
        ls -al $DEB_SRC 
      
    
